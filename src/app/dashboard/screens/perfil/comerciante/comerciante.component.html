<div class="h-full w-full">
  <form
    method="post"
    action=""
    class="w-full h-[145%] mt-[2.5%] pb-[1%] flex flex-col items-center"
    [formGroup]="formularioComerciante!"
    autocomplete="off"
    (ngSubmit)="procesarFormularioComerciante()"
  >
    <!-- PARTE 1 -->
    <!-- INICIO -->
    <div
      class="flex flex-row w-[80%] h-[48%] gap-[2%] items-center justify-center"
    >
      <label
        for="fileUpload"
        class="w-[580px] h-[450px] flex flex-col justify-center items-center text-blue rounded-lg shadow-lg tracking-wide uppercase border border-blue cursor-pointer hover:bg-blue hover:text-white"
      >
        <img
          id="imagePreview"
          [src]="imageEmpresa()"
          alt=""
          [class]="
            estadoImagen()
              ? 'w-full h-full object-contain'
              : 'w-[200px] h-[200px] object-contain'
          "
        />
        <input
          id="fileUpload"
          type="file"
          class="hidden"
          (change)="seleccionarImagen($event)"
        />
      </label>

      <!-- </div> -->
      <div class="w-[40%] h-[95%]">
        <!-- Nombre del Negocio -->
        <div class="w-full h-[25%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Negocio
          </p>
          <input
            formControlName="nombreNegocio"
            type=" text"
            placeholder="Nombre de Negocio"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- Nombre del Dueño -->
        <div class="w-full h-[25%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Dueño
          </p>
          <input
            formControlName="nombreDueño"
            type=" text"
            placeholder="Nombre del Dueño"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- HORARIO ATENCION -->
        <div class="w-full h-[25%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Horario Atencion
          </p>
          <input
            formControlName="horarioAtencion"
            type=" text"
            placeholder="Horario Atencion"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- NRO ATENCION  -->
        <div class="w-full h-[25%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Numero Atencion Cliente
          </p>
          <input
            formControlName="numeroAtencion"
            type="number"
            placeholder="Telefono"
            oninput="validity.valid||(value='1');"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
      </div>
    </div>
    <!-- FIN -->

    <!-- PARTE 2 -->
    <!-- INICIO -->
    <div
      class="flex flex-row w-[77%] h-[80%] gap-[2%] items-center justify-center"
    >
      <div class="w-[40%] h-[100%] flex flex-col items-center justify-center">
        <!-- COORDENADAS Longitud -->
        <div class="w-full h-[15%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Coordenadas Longitud
          </p>
          <input
            formControlName="coordenadaLongitud"
            type="number"
            placeholder="Longitud"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- COORDENADAS Latitud -->
        <div class="w-full h-[15%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Coordenadas Latitud
          </p>
          <input
            formControlName="coordenadaLatitud"
            type="number"
            placeholder="Latitud"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- Ubicacion Descriptiva -->
        <div class="w-full h-[15%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Ubicacion Descriptiva
          </p>
          <input
            formControlName="ubicacionDescriptiva"
            type="text"
            placeholder="Detalle de Ubicacion"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- Url de Google Maps -->
        <div class="w-full h-[15%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Google Maps
          </p>
          <input
            formControlName="urlGoogleMaps"
            type="text"
            placeholder="Url Google Maps"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- Formulario Quejas -->
        <div class="w-full h-[15%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Formulario Quejas
          </p>
          <input
            formControlName="urlFormQuejas"
            type="text"
            placeholder="Formulario Quejas"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
        <!-- Url de pagina Web -->
        <div class="w-full h-[15%] flex flex-col justify-between">
          <p
            class="font-google-anta text-2xl pt-2"
            style="text-shadow: 1px 1px #31bb11"
          >
            Web
          </p>
          <input
            formControlName="urlWeb"
            type="text"
            placeholder="Url Pagin Web"
            class="rounded-md w-full h-[60%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
        </div>
      </div>
      <!-- TIPO DE CUARTOS -->
      <div
        class="p-[1.5%] w-[40%] h-[90%] rounded-2xl border-2 border-gray-400"
      >
        <p
          class="font-google-anta text-2xl pb-[2.5%]"
          style="text-shadow: 1px 1px #31bb11"
        >
          Categorias del Negocio
        </p>
        <div class="w-full h-[11%] flex flex-row items-center gap-[2%]">
          <input
            formControlName="categoria"
            type="text"
            placeholder="Categorias de Compra"
            class="rounded-md w-[100%] h-[100%] font-google-anta text-2xl pl-4 border-2 border-gray-400 focus:outline-none focus:border-custom-primary focus:border-4"
          />
          <div
            (click)="addCategoria()"
            class="cursor-pointer h-[80%] w-[10%] rounded-xl bg-custom-primary border-4 flex flex-col shadow-xl items-center justify-center justify-items-center"
          >
            <p
              class="text-white font-bold font-google-anta text-3xl py-4"
              style="text-shadow: 2px 2px black"
            >
              +
            </p>
          </div>
        </div>
        <div
          class="h-[55vh] w-[100%] mt-[2.5%] overflow-auto flex flex-col gap-[2%]"
        >
          @for(categoria of categoriasProductos; track categoriasProductos ; let
          id= $index){
          <div class="flex flex-row gap-[1.5%] items-center flex-shrink-0">
            <img
              src="assets/categoriaProducto.svg"
              alt="Descripción de la imagen"
              class="h-9 w-9"
            />
            <p class="text-2xl text-black font-google-anta">{{ categoria }}</p>
            <img
              src="assets/delete.svg"
              alt=""
              class="h-8 w-8 cursor-pointer"
              (click)="eliminarCategoria(id)"
            />
          </div>
          }@empty {
          <div
            class="flex gap-[1%] h-[100%] w-full items-center justify-center"
          >
            <img
              src="assets/teclado.gif"
              alt=""
              class="h-[50%] w-[50%] object-contain"
            />
          </div>
          }
        </div>
      </div>
    </div>
    <!-- FIN -->

    <!-- PARTE 4 -->
    <!-- INICIO -->
    <div
      class="flex flex-row gap-[1%] w-[80%] h-[10%] items-center justify-end"
    >
      <div
        [ngClass]="{'hidden' : !esSupervisor(), }"
        class="relative w-[20%] h-[80%] flex flex-row items-center gap-[2%]"
      >
        <input
          type="checkbox"
          id="opcionOffer2"
          class="peer/opcionOffer2 hidden"
        />
        <label
          for="opcionOffer2"
          class="bg-open-windown h-10 w-10 bg-cover bg-center cursor-pointer peer-checked/opcionOffer2:bg-close-windown transition-all"
        ></label>
        <input
          type="text"
          name=""
          id=""
          placeholder="Estado"
          [value]="valueSelectEstado"
          class="rounded-md w-full h-[90%] fnt-google-anta text-2xl pl-4 outline-none border-custom-primary border-4 font-google-anta"
          disabled
        />
        <div
          class="peer-checked/opcionOffer2:visible invisible flex flex-col absolute bottom-[100%] left-[14%] w-[200px] bg-slate-50 rounded-xl shadow-custom-shadow z-10"
        >
          @for (estado of difEstadoComerciante; track difEstadoComerciante; let
          last = $last) {
          <div
            [class]="{ 'rounded-b-xl': last }"
            (click)="updateSelectEstado(estado)"
            class="items-center justify-center flex flex-row gap-4 w-[100%] h-[70px] border-b-2 border-b-gray-400 border-opacity-50 hover:bg-gray-400 hover:bg-opacity-50"
          >
            <div class="flex flex-col">
              <p class="text-2xl font-bold font-google-anta">{{ estado }}</p>
            </div>
          </div>
          }
        </div>
      </div>
      <button
        type="submit"
        class="h-[80%] w-[10%] rounded-xl bg-custom-primary mr-[9%] border-4 shadow-xl"
      >
        <p
          class="text-white font-bold font-google-anta text-3xl py-4"
          style="text-shadow: 2px 2px black"
        >
          Guardar
        </p>
      </button>
    </div>
    <! -- FIN -->
  </form>
  <script
    src="https://widget.cloudinary.com/v2.0/global/all.js"
    type="text/javascript"
  ></script>
  <script src="upload_widget.js" type="text/javascript"></script>
</div>
